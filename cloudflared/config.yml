tunnel: de34187a-1d92-4d21-a99f-504533e2acbd
credentials-file: /etc/cloudflared/de34187a-1d92-4d21-a99f-504533e2acbd.json

# Global origin request settings for mTLS
originRequest:
  # Path to the Certificate Authority that signed origin certificates
  caPool: /certs/ca.crt
  # Do NOT skip TLS verification - we want mTLS protection
  noTLSVerify: false
  # Connection timeouts
  connectTimeout: 30s
  tlsTimeout: 10s

ingress:
  # Route API requests to backend service (HTTPS with mTLS)
  - hostname: psscript.morloksmaze.com
    path: /api/*
    service: https://backend:4000
    originRequest:
      originServerName: backend
      http2Origin: true
  # Route all other requests to frontend (HTTPS with mTLS)
  - hostname: psscript.morloksmaze.com
    # Frontend Vite dev server runs on 3090 in this repo.
    service: https://frontend:3090
    originRequest:
      originServerName: frontend
      # Vite dev server speaks HTTP/1.1; forcing HTTP/2 can cause intermittent tunnel errors.
      http2Origin: false
  - service: http_status:404
